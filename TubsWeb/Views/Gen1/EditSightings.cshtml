@model Spc.Ofp.Tubs.DAL.Entities.Trip
@using Spc.Ofp.Tubs.DAL.Entities

@* For now, create this in the View. *@
@{
    IEnumerable<Tuple<string, string>> crumbs = new List<Tuple<string, string>>()
    {
        Tuple.Create(Url.Action("Index", "Trip"), "Trips"),
        Tuple.Create(Url.Action("Details", "Trip", new { tripId = ViewBag.TripId }), Model.SpcTripNumber ?? "This Trip"),
        Tuple.Create(Url.Action("Index", "Gen1", new { tripId = ViewBag.TripId }), "GEN-1"),
        Tuple.Create("#", "Edit GEN-1 Sightings")
    };
}

@{ Html.RenderPartial("_BreadCrumbs", crumbs); }

<fieldset>
    <legend>Vessel or Aircraft Sightings</legend>
    @{ Html.RenderPartial("_EditSightings", Model.Sightings); }
</fieldset>

@{
    AjaxOptions options = new AjaxOptions
    {
        HttpMethod = "Post",
        UpdateTargetId = "gen1Sightings",
        OnSuccess = String.Format("clearForm('#{0}')", "addSightingForm")
    }; 
}

@using (Ajax.BeginForm("AddSighting", "Gen1", null, options, new { id = "addSightingForm", @class = "form well" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Add Sighting</legend>
        @{ var sighting = new Sighting(); }
        @Html.EditorFor(s => sighting)
        <div class="btn-group">
            <input type="submit" name="Save" value="Save" class="btn-primary" />
            <input type="reset" name="Cancel" />
        </div>
    </fieldset>
}

@section AdditionalScripts {
    @{ Html.RenderPartial("_DateTimePickerInit"); }
}

