@model IEnumerable<Spc.Ofp.Tubs.DAL.Entities.PurseSeineSet>
@using Spc.Ofp.Tubs.DAL.Common           

@helper IsSkunk(IList<Spc.Ofp.Tubs.DAL.Entities.PurseSeineSetCatch> setcatch) {
    if (0 == setcatch.Count) {
        <text>Y</text>   
    } else {
        <text>N</text>
    }
}

<h2>@ViewBag.Title</h2>

<table>
    <thead>
        <tr>
            <th>Set #</th>
            <th>Association</th>
            <th>Skunk Set</th>
            <th>Total Catch (Observed)</th>
            <th>Comments</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var set in @Model)
    {
        <tr>
            <td>
                <a href='@Url.RouteUrl("SetDetails", new { tripId = ViewBag.TripId, setNumber = set.SetNumber })'>@set.SetNumber</a>
            </td>
            <td>@set.Activity.SchoolAssociation.GetDescription()</td>
            <td>@IsSkunk(set.CatchList)</td>
            <td>@set.CatchList.Sum(sc => sc.MetricTonsObserved)</td>
            <td>@set.Comments</td>
        </tr>
    }
    </tbody>
</table>

<p>
    <a href='@Url.RouteUrl("TripDetails", new { tripId = ViewBag.TripId })'>Back to Trip</a>
</p>
