(function(n){var i=[].slice,t={},r=n.amplify={publish:function(n){var s=i.call(arguments,1),r,u,o,f=0,e;if(!t[n])return!0;for(r=t[n].slice(),o=r.length;f<o;f++)if(u=r[f],e=u.callback.apply(u.context,s),e===!1)break;return e!==!1},subscribe:function(n,i,r,u){var f,s;arguments.length===3&&typeof r=="number"&&(u=r,r=i,i=null),arguments.length===2&&(r=i,i=null),u=u||10;for(var e=0,h=n.split(/\s/),c=h.length,o;e<c;e++){for(n=h[e],o=!1,t[n]||(t[n]=[]),f=t[n].length-1,s={callback:r,context:i,priority:u};f>=0;f--)if(t[n][f].priority<=u){t[n].splice(f+1,0,s),o=!0;break}o||t[n].unshift(s)}return r},unsubscribe:function(n,i){if(t[n])for(var u=t[n].length,r=0;r<u;r++)if(t[n][r].callback===i){t[n].splice(r,1);break}}}})(this),function(n,t){function f(n,r){i.addType(n,function(f,e,o){var c,s,v,l,h=e,a=(new Date).getTime();if(!f){h={},l=[],v=0;try{for(f=r.length;f=r.key(v++);)u.test(f)&&(s=JSON.parse(r.getItem(f)),s.expires&&s.expires<=a?l.push(f):h[f.replace(u,"")]=s.data);while(f=l.pop())r.removeItem(f)}catch(y){}return h}if(f="__amplify__"+f,e===t)if(c=r.getItem(f),s=c?JSON.parse(c):{expires:-1},s.expires&&s.expires<=a)r.removeItem(f);else return s.data;else if(e===null)r.removeItem(f);else{s=JSON.stringify({data:e,expires:o.expires?a+o.expires:null});try{r.setItem(f,s)}catch(y){i[n]();try{r.setItem(f,s)}catch(y){throw i.error();}}}return h})}var i=n.store=function(n,t,r,u){var u=i.type;return r&&r.type&&r.type in i.types&&(u=r.type),i.types[u](n,t,r||{})},u,r;i.types={},i.type=null,i.addType=function(n,t){i.type||(i.type=n),i.types[n]=t,i[n]=function(t,r,u){return u=u||{},u.type=n,i(t,r,u)}},i.error=function(){return"amplify.store quota exceeded"},u=/^__amplify__/;for(r in{localStorage:1,sessionStorage:1})try{window[r].getItem&&f(r,window[r])}catch(e){}if(window.globalStorage)try{f("globalStorage",window.globalStorage[window.location.hostname]),i.type==="sessionStorage"&&(i.type="globalStorage")}catch(e){}(function(){if(!i.types.localStorage){var n=document.createElement("div"),r="amplify";n.style.display="none",document.getElementsByTagName("head")[0].appendChild(n);try{n.addBehavior("#default#userdata"),n.load(r)}catch(u){n.parentNode.removeChild(n);return}i.addType("userData",function(u,f,e){n.load(r);var s,o,h,v,l,c=f,a=(new Date).getTime();if(!u){for(c={},l=[],v=0;s=n.XMLDocument.documentElement.attributes[v++];)o=JSON.parse(s.value),o.expires&&o.expires<=a?l.push(s.name):c[s.name]=o.data;while(u=l.pop())n.removeAttribute(u);return n.save(r),c}if(u=u.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),f===t)if(s=n.getAttribute(u),o=s?JSON.parse(s):{expires:-1},o.expires&&o.expires<=a)n.removeAttribute(u);else return o.data;else f===null?n.removeAttribute(u):(h=n.getAttribute(u),o=JSON.stringify({data:f,expires:e.expires?a+e.expires:null}),n.setAttribute(u,o));try{n.save(r)}catch(y){h===null?n.removeAttribute(u):n.setAttribute(u,h),i.userData();try{n.setAttribute(u,o),n.save(r)}catch(y){h===null?n.removeAttribute(u):n.setAttribute(u,h);throw i.error();}}return c})}})(),function(){function u(n){return n===t?t:JSON.parse(JSON.stringify(n))}var n={},r={};i.addType("memory",function(i,f,e){return i?f===t?u(n[i]):(r[i]&&(clearTimeout(r[i]),delete r[i]),f===null)?(delete n[i],null):(n[i]=f,e.expires&&(r[i]=setTimeout(function(){delete n[i],delete r[i]},e.expires)),f):u(n)})}()}(this.amplify=this.amplify||{}),function(n){function t(){}function r(n){return{}.toString.call(n)==="[object Function]"}function i(n){var t=!1;return setTimeout(function(){t=!0},1),function(){var i=this,r=arguments;t?n.apply(i,r):setTimeout(function(){n.apply(i,r)},1)}}n.request=function(u,f,e){var o=u||{};typeof o=="string"&&(r(f)&&(e=f,f={}),o={resourceId:u,data:f||{},success:e});var s={abort:t},h=n.request.resources[o.resourceId],c=o.success||t,l=o.error||t;if(o.success=i(function(t,i){i=i||"success",n.publish("request.success",o,t,i),n.publish("request.complete",o,t,i),c(t,i)}),o.error=i(function(t,i){i=i||"error",n.publish("request.error",o,t,i),n.publish("request.complete",o,t,i),l(t,i)}),!h){if(!o.resourceId)throw"amplify.request: no resourceId provided";throw"amplify.request: unknown resourceId: "+o.resourceId;}if(!n.publish("request.before",o)){o.error(null,"abort");return}return n.request.resources[o.resourceId](o,s),s},n.request.types={},n.request.resources={},n.request.define=function(t,i,r){if(typeof i=="string"){if(!(i in n.request.types))throw"amplify.request.define: unknown type: "+i;r.resourceId=t,n.request.resources[t]=n.request.types[i](r)}else n.request.resources[t]=i}}(amplify),function(n,t,i){var u=["status","statusText","responseText","responseXML","readyState"],f=/\{([^\}]+)\}/g,r;n.request.types.ajax=function(r){return r=t.extend({type:"GET"},r),function(f,e){function c(n,r){t.each(u,function(n,t){try{o[t]=s[t]}catch(i){}}),/OK$/.test(o.statusText)&&(o.statusText="success"),n===i&&(n=null),l&&(r="abort"),/timeout|error|abort/.test(r)?o.error(n,r):o.success(n,r),c=t.noop}var s,v=r.url,a=e.abort,h=t.extend(!0,{},r,{data:f.data}),l=!1,o={readyState:0,setRequestHeader:function(n,t){return s.setRequestHeader(n,t)},getAllResponseHeaders:function(){return s.getAllResponseHeaders()},getResponseHeader:function(n){return s.getResponseHeader(n)},overrideMimeType:function(n){return s.overrideMideType(n)},abort:function(){l=!0;try{s.abort()}catch(n){}c(null,"abort")},success:function(n,t){f.success(n,t)},error:function(n,t){f.error(n,t)}};n.publish("request.ajax.preprocess",r,f,h,o),t.extend(h,{success:function(n,t){c(n,t)},error:function(n,t){c(null,t)},beforeSend:function(t,i){s=t,h=i;var u=r.beforeSend?r.beforeSend.call(this,o,h):!0;return u&&n.publish("request.before.ajax",r,f,h,o)}}),t.ajax(h),e.abort=function(){o.abort(),a.call(this)}}},n.subscribe("request.ajax.preprocess",function(n,i,r){var e=[],u=r.data;typeof u!="string"&&(u=t.extend(!0,{},n.data,u),r.url=r.url.replace(f,function(n,t){if(t in u)return e.push(t),u[t]}),t.each(e,function(n,t){delete u[t]}),r.data=u)}),n.subscribe("request.ajax.preprocess",function(n,i,r){var u=r.data,f=n.dataMap;f&&typeof u!="string"&&(t.isFunction(f)?r.data=f(u):(t.each(n.dataMap,function(n,t){n in u&&(u[t]=u[n],delete u[n])}),r.data=u))}),r=n.request.cache={_key:function(n,t,i){function f(){return i.charCodeAt(r++)<<24|i.charCodeAt(r++)<<16|i.charCodeAt(r++)<<8|i.charCodeAt(r++)<<0}i=t+i;for(var e=i.length,r=0,u=f();r<e;)u^=f();return"request-"+n+"-"+u},_default:function(){var n={};return function(t,i,u,f){var e=r._key(i.resourceId,u.url,u.data),o=t.cache,s;if(e in n)return f.success(n[e]),!1;s=f.success,f.success=function(t){n[e]=t,typeof o=="number"&&setTimeout(function(){delete n[e]},o),s.apply(this,arguments)}}}()},n.store&&(t.each(n.store.types,function(t){r[t]=function(i,u,f,e){var o=r._key(u.resourceId,f.url,f.data),s=n.store[t](o),h;if(s)return f.success(s),!1;h=e.success,e.success=function(r){n.store[t](o,r,{expires:i.cache.expires}),h.apply(this,arguments)}}}),r.persist=r[n.store.type]),n.subscribe("request.before.ajax",function(n){var t=n.cache;if(t)return t=t.type||t,r[t in r?t:"_default"].apply(this,arguments)}),n.request.decoders={jsend:function(n,t,i,r,u){n.status==="success"?r(n.data):n.status==="fail"?u(n.data,"fail"):n.status==="error"&&(delete n.status,u(n,"error"))}},n.subscribe("request.before.ajax",function(i,r,u,f){function o(n,t){h(n,t)}function s(n,t){c(n,t)}var h=f.success,c=f.error,e=t.isFunction(i.decoder)?i.decoder:i.decoder in n.request.decoders?n.request.decoders[i.decoder]:n.request.decoders._default;e&&(f.success=function(n,t){e(n,t,f,o,s)},f.error=function(n,t){e(n,t,f,o,s)})})}(amplify,jQuery);
//@ sourceMappingURL=amplify.min.js.map